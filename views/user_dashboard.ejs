<!DOCTYPE html>
<html lang="en">
<%- include('./partials/header.ejs')-%>
<body>

    <%- include('./partials/navbar.ejs')-%>

    <div id="dashboardDiv" class="d-flex flex-column">

        <div class="d-flex flex-row">

            <div class="card">
                <div class="card-header">
                    <h4>Add Asset</h4>
                </div>

                <div class="card-body">
                    <form id="addAssetForm" action="/add_asset" method="POST">
                        <input id="assetNameInput" name="asset_name" type="text" placeholder="Name" required>
                        <input id="assetBrandInput" name="brand" type="text" placeholder="Brand, i.e. Apple" required>
                        <input id="assetModelInput" name="model" type="text" placeholder="Model, i.e. A2338" required>
                        <input id="assetSerialInput" name="serial_no" type="text" placeholder="Serial No" required>
                        <input id="assetPurchaseDateInput" name="purchase_date" type="date" required>
                        <input id="assetCostInput" name="cost" type="number" required>
                        <input id="assetVendorInput" name="vendor" type="text" placeholder="Vendor, i.e. Amazon" required>
                        <input id="assetLifeInput" name="useful_life" type="number" required>

                        <select id="assetMaintenanceInput" name="maintenance_schedule" required>
                            <option value="weekly">Weekly</option>
                            <option value="biweekly">Biweekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                        </select>

                        <select id="assetCategoryInput" name="category" required>

                            <% if (typeof categories === "object" && Array.isArray(categories) === true) { %>

                            <% categories.forEach((category) => { %>
                            <option value=<%=category.category_id %>><%=category.category_name %></option>
                            <% }); %>

                            <% } %>
                        </select>


                        <select id="assetSiteInput" name="site" required>

                            <% if (typeof sites === "object" && Array.isArray(sites) === true) { %>

                            <% sites.forEach((site) => { %>
                            <option value=<%=site.location_id %>><%=`${site.site_name} - ${site.location_name}` %></option>
                            <% }); %>

                            <% } %>
                        </select>

                        <input type="submit" value="Add" >
                    </form>
                </div>

            </div>

            <div class="card">
                <div class="card-header">
                    <h4>Add Category</h4>
                </div>

                <div class="card-body">
                    <form id="addAssetForm" action="/add_category" method="POST">
                        <input id="assetNameInput" name="name" type="text" placeholder="Asset Name">
                        <input type="submit" value="Add" >
                    </form>
                </div>

            </div>

            <div class="card">
                <div class="card-header">
                    <h4>Add Site</h4>
                </div>

                <div class="card-body">
                    <form id="addAssetForm" action="/add_site" method="POST">
                        <input id="assetNameInput" name="name" type="text" placeholder="Asset Name">
                        <input type="submit" value="Add" >
                    </form>
                </div>

            </div>
        </div>


        <table id="assetTable" class="table table-striped table-bordered" style="width: 100%">
            <thead>
                <tr>
                    <th colspan="1" rowspan="2">Id</th>
                    <th colspan="1" rowspan="2">Name</th>
                    <th colspan="1" rowspan="2">Category</th>
                    <th colspan="2">Type</th>
                    <th colspan="2">Location</th>
                </tr>

                <tr>
                    <th class="th-sm" data-sortable="true">Brand</th>
                    <th class="th-sm" data-sortable="true">Model</th>
                    <th class="th-sm" data-sortable="true">Site</th>
                    <th class="th-sm" data-sortable="true">Location</th>
                </tr>
            </thead>
            <tbody>
                <% if (typeof assets === "object" && Array.isArray(assets) === true) { %>

                <% assets.forEach((asset) => { %>

                <% console.log(asset) %>

                <tr>
                    <td><%=asset.asset_id %></td>
                    <td><%=asset.asset_name %></td>
                    <td><%=asset.category_name %></td>
                    <td><%=asset.brand %></td>
                    <td><%=asset.model %></td>
                    <td><%=asset.site_name %></td>
                    <td><%=asset.location_name %></td>
                </tr>

                <% }); %>
                <% } %>
            </tbody>
        </table>

        <script>
            $("#assetTable").DataTable({
                pagingType: "full"
            });
        </script>

    </div>

    <%- include('./partials/footer.ejs')-%>

</body>

</html>
