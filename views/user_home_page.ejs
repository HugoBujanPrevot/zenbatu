

<!DOCTYPE html>
<html>
    <head>

        <!-- JQuery -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
        
        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>

        <!-- Data Tables -->
        <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">

        <!-- Bootstrap 4 CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <!-- Personal CSS -->
        <link rel="stylesheet" href="./css/styles.css">

        <title>Zenbatu User Home Page</title>

    </head>

    <body>

        <div>

            <%- include('./partials/navbar.ejs', { page: "" })-%>

            <div id="dashboardDiv" class="d-flex flex-column">

                <div class="d-flex flex-row">

                    <div class="card">
                        <div class="card-header">
                            <h4>Add Asset</h4>
                        </div>

                        <div class="card-body">
                            <form id="addAssetForm" action="/add_asset" method="POST">
                                <input id="assetNameInput" name="asset_name" type="text" placeholder="Name" required>
                                <input id="assetBrandInput" name="brand" type="text" placeholder="Brand, i.e. Apple" required>
                                <input id="assetModelInput" name="model" type="text" placeholder="Model, i.e. A2338" required>
                                <input id="assetSerialInput" name="serial_no" type="text" placeholder="Serial No" required>
                                <input id="assetPurchaseDateInput" name="purchase_date" type="date" required>
                                <input id="assetCostInput" name="cost" type="number" required>
                                <input id="assetVendorInput" name="vendor" type="text" placeholder="Vendor, i.e. Amazon" required>
                                <input id="assetLifeInput" name="useful_life" type="number" required>

                                <select id="assetMaintenanceInput" name="maintenance_schedule" required>
                                    <option value="weekly">Weekly</option>
                                    <option value="biweekly">Biweekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                </select>

                                <select id="assetCategoryInput" name="category" required>

                                    <% if (typeof data.categories === "object" && Array.isArray(data.categories) === true) { %>

                                        <% data.categories.forEach((category) => { %>
                                            <option value=<%=category.id %>><%=category.name %></option>
                                        <% }); %>

                                    <% } %>
                                </select>

                                
                                <select id="assetSiteInput" name="site" required>

                                    <% if (typeof data.sites === "object" && Array.isArray(data.sites) === true) { %>

                                        <% data.sites.forEach((site) => { %>
                                            <option value=<%=category %>><%=category %></option>
                                        <% }); %>

                                    <% } %>
                                </select>

                                <input type="submit" value="Add" >
                            </form>
                        </div>
                        
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4>Add Category</h4>
                        </div>

                        <div class="card-body">
                            <form id="addAssetForm" action="/add_category" method="POST">
                                <input id="assetNameInput" name="name" type="text" placeholder="Asset Name">
                                <input type="submit" value="Add" >
                            </form>
                        </div>
                        
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4>Add Site</h4>
                        </div>

                        <div class="card-body">
                            <form id="addAssetForm" action="/add_site" method="POST">
                                <input id="assetNameInput" name="name" type="text" placeholder="Asset Name">
                                <input type="submit" value="Add" >
                            </form>
                        </div>
                        
                    </div>
                </div>


                <table id="assetTable" class="table table-striped table-bordered" style="width: 100%">
                    <thead>
                        <tr>
                            <th colspan="1" rowspan="2">Id</th>
                            <th colspan="1" rowspan="2">Name</th>
                            <th colspan="1" rowspan="2">Category</th>
                            <th colspan="2">Type</th>
                            <th colspan="2">Location</th>
                        </tr>

                        <tr>
                            <th class="th-sm" data-sortable="true">Brand</th>
                            <th class="th-sm" data-sortable="true">Model</th>
                            <th class="th-sm" data-sortable="true">Site</th>
                            <th class="th-sm" data-sortable="true">Location</th>
                        </tr>
                    </thead>
                    <tbody>
                            <% if (typeof assets === "object" && Array.isArray(assets) === true) { %>

                                <% assets.forEach((asset) => { %>
                                    
                                    <% //console.log(asset) %>

                                    <tr>
                                        <td><%=asset.asset_id %></td>
                                        <td><%=asset.asset_name %></td>
                                        <td><%=asset.category_name %></td>
                                        <td><%=asset.brand %></td>
                                        <td><%=asset.model %></td>
                                        <td><%=asset.site_name %></td>
                                        <td><%=asset.location_name %></td>
                                    </tr>

                                <% }); %>
                            <% } %>
                    </tbody>
                </table>

                <script>
                    $("#assetTable").DataTable({
                        pagingType: "full"
                    });
                </script>

            </div>
        </div>
        

    </body>
</html>